{"uid":"64a0cc29be0cc9db","name":"Update product with invalid data fails","fullName":"tests.products.test_products.TestProducts#test_update_product_with_wrong_data","historyId":"b46ee8995826d34e4170a80d34adb3bc","time":{"start":1762279508297,"stop":1762279508297,"duration":0},"status":"broken","statusMessage":"pydantic_core._pydantic_core.ValidationError: 9 validation errors for CreateProductResponseSchema\nid\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\ntitle\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\nslug\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\nprice\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\ndescription\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\ncategory\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\nimages\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\ncreationAt\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\nupdatedAt\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing","statusTrace":"products_client = <clients.products.products_client.ProductsClient object at 0x7fad0fdbd8b0>\nfunction_category = CategoryFixture(request=CreateCategoryRequestSchema(name='Industry report', image='http://www.griffin-ramsey.com/tag/b...e(2025, 11, 4, 18, 5, 8, tzinfo=TzInfo(UTC)), updated_at=datetime.datetime(2025, 11, 4, 18, 5, 8, tzinfo=TzInfo(UTC))))\n\n    @pytest.fixture\n    def function_product(products_client: ProductsClient, function_category: CategoryFixture) -> ProductFixture:\n        \"\"\"\n        Фикстура для создания новой продукта.\n    \n        :param products_client: Клиент для работы с роутом /api/v1/products.\n        :param function_category: Pydantic схема CategoryFixture c данными новой категории.\n        :return: Pydantic схема ProductFixture c данными нового продукта.\n        \"\"\"\n        request = CreateProductRequestSchema(category_id=function_category.response.id)\n>       response = products_client.create_product(request)\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nfixtures/products.py:29: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <clients.products.products_client.ProductsClient object at 0x7fad0fdbd8b0>\nrequest = CreateProductRequestSchema(title='Career walk', price=9355.1, description='Boy still hit when.', category_id=81, image...esauthor.jsp', 'https://sullivan-myers.com/wp-content/listlogin.htm', 'https://www.edwards.com/list/maincategory.asp'])\n\n    def create_product(self, request: CreateProductRequestSchema) -> CreateProductResponseSchema:\n        response = self.create_product_api(request)\n>       return CreateProductResponseSchema.model_validate_json(response.text)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE       pydantic_core._pydantic_core.ValidationError: 9 validation errors for CreateProductResponseSchema\nE       id\nE         Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\nE           For further information visit https://errors.pydantic.dev/2.11/v/missing\nE       title\nE         Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\nE           For further information visit https://errors.pydantic.dev/2.11/v/missing\nE       slug\nE         Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\nE           For further information visit https://errors.pydantic.dev/2.11/v/missing\nE       price\nE         Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\nE           For further information visit https://errors.pydantic.dev/2.11/v/missing\nE       description\nE         Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\nE           For further information visit https://errors.pydantic.dev/2.11/v/missing\nE       category\nE         Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\nE           For further information visit https://errors.pydantic.dev/2.11/v/missing\nE       images\nE         Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\nE           For further information visit https://errors.pydantic.dev/2.11/v/missing\nE       creationAt\nE         Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\nE           For further information visit https://errors.pydantic.dev/2.11/v/missing\nE       updatedAt\nE         Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\nE           For further information visit https://errors.pydantic.dev/2.11/v/missing\n\nclients/products/products_client.py:89: ValidationError","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1762279501754,"stop":1762279501756,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_global_logger","time":{"start":1762279501756,"stop":1762279501763,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_to_allure","time":{"start":1762279508297,"stop":1762279508301,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"products_client","time":{"start":1762279508302,"stop":1762279508323,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"category_client","time":{"start":1762279508323,"stop":1762279508344,"duration":21},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"function_category","time":{"start":1762279508344,"stop":1762279508651,"duration":307},"status":"passed","steps":[{"name":"Create category","time":{"start":1762279508345,"stop":1762279508650,"duration":305},"status":"passed","steps":[{"name":"Make POST request to 'api/v1/categories'","time":{"start":1762279508345,"stop":1762279508650,"duration":305},"status":"passed","steps":[],"attachments":[{"uid":"322cc744d3a6439e","name":"cURL command","source":"322cc744d3a6439e.txt","type":"text/plain","size":399}],"parameters":[{"name":"url","value":"'api/v1/categories'"},{"name":"json","value":"{'name': 'Industry report', 'image': 'http://www.griffin-ramsey.com/tag/blog/tagfaq.htm'}"},{"name":"data","value":"None"},{"name":"files","value":"None"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"request","value":"CreateCategoryRequestSchema(name='Industry report', image='http://www.griffin-ramsey.com/tag/blog/tagfaq.htm')"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"function_product","time":{"start":1762279508651,"stop":1762279508972,"duration":321},"status":"broken","statusMessage":"pydantic_core._pydantic_core.ValidationError: 9 validation errors for CreateProductResponseSchema\nid\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\ntitle\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\nslug\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\nprice\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\ndescription\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\ncategory\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\nimages\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\ncreationAt\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\nupdatedAt\n  Field required [type=missing, input_value={'message': ['This text i...est', 'statusCode': 400}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing\n","statusTrace":"  File \"/home/runner/.local/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/home/runner/.local/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/home/runner/.local/lib/python3.12/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.local/lib/python3.12/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/home/runner/.local/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/home/runner/.local/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/home/runner/.local/lib/python3.12/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"/home/runner/.local/lib/python3.12/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.local/lib/python3.12/site-packages/_pytest/fixtures.py\", line 1196, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.local/lib/python3.12/site-packages/_pytest/fixtures.py\", line 930, in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/api_autotests/api_autotests/fixtures/products.py\", line 29, in function_product\n    response = products_client.create_product(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/api_autotests/api_autotests/clients/products/products_client.py\", line 89, in create_product\n    return CreateProductResponseSchema.model_validate_json(response.text)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.local/lib/python3.12/site-packages/pydantic/main.py\", line 746, in model_validate_json\n    return cls.__pydantic_validator__.validate_json(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"Create product","time":{"start":1762279508652,"stop":1762279508971,"duration":319},"status":"passed","steps":[{"name":"Make POST request to 'api/v1/products'","time":{"start":1762279508652,"stop":1762279508971,"duration":319},"status":"passed","steps":[],"attachments":[{"uid":"8843778cc2ec76f4","name":"cURL command","source":"8843778cc2ec76f4.txt","type":"text/plain","size":637}],"parameters":[{"name":"url","value":"'api/v1/products'"},{"name":"json","value":"{'title': 'Career walk', 'price': 9355.1, 'description': 'Boy still hit when.', 'categoryId': 81, 'images': ['http://matthews.com/list/search/wp-contentsearch.htm', 'http://www.contreras-clark.org/posts/search/categoriesauthor.jsp', 'https://sullivan-myers.com/wp-content/listlogin.htm', 'https://www.edwards.com/list/maincategory.asp']}"},{"name":"data","value":"None"},{"name":"files","value":"None"}],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"request","value":"CreateProductRequestSchema(title='Career walk', price=9355.1, description='Boy still hit when.', category_id=81, images=['http://matthews.com/list/search/wp-contentsearch.htm', 'http://www.contreras-clark.org/posts/search/categoriesauthor.jsp', 'https://sullivan-myers.com/wp-content/listlogin.htm', 'https://www.edwards.com/list/maincategory.asp'])"}],"stepsCount":1,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"afterStages":[{"name":"attach_logs_to_allure::0","time":{"start":1762279508980,"stop":1762279508980,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"4bf2bd550dbfdec","name":"logs","source":"4bf2bd550dbfdec.txt","type":"text/plain","size":510}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"labels":[{"name":"story","value":"Validate entity"},{"name":"epic","value":"Store service"},{"name":"feature","value":"Products"},{"name":"severity","value":"normal"},{"name":"tag","value":"products"},{"name":"tag","value":"regression"},{"name":"parentSuite","value":"tests.products"},{"name":"suite","value":"test_products"},{"name":"subSuite","value":"TestProducts"},{"name":"host","value":"runnervmf2e7y"},{"name":"thread","value":"2518-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.products.test_products"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"message","value":"['price must be a positive number']"},{"name":"payload","value":"{'price': -1}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":1,"skipped":0,"passed":1,"unknown":0,"total":2},"items":[{"uid":"fbd9eb5cb05bf2b8","reportUrl":"https://BorisBorisa.github.io/api_autotests/6/#testresult/fbd9eb5cb05bf2b8","status":"passed","time":{"start":1762279408955,"stop":1762279408986,"duration":31}}]},"tags":["regression","products"]},"source":"64a0cc29be0cc9db.json","parameterValues":["['price must be a positive number']","{'price': -1}"]}